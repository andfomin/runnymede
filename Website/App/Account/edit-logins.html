<h3 class="page-header">{{pageTitle}}</h3>
<div class="row">
    <div class="col-sm-3">
        <div class="panel panel-default">
            <div class="panel-body">
                <ul class="list-unstyled">
                    <li><a href="#/personal">Personal</a></li>
                    <li>Manage&nbsp;logins</li>
                    <li ng-if="vm.isTeacher" ng-cloak><a href="#/teacher">Teacher</a></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-sm-9">
        <p>
            Your login name is <strong>{{vm.userName}}</strong> .
        </p>

        <div ng-if="vm.loaded" ng-cloak>
            <hr class="app-separator" />
            <div ng-show="vm.hasPassword">
                <p>
                    You have set a password for your login name.
                </p>
                <h4>Change password</h4>
            </div>
            <div ng-hide="vm.hasPassword">
                <p>
                    You have not set a password for your login name.
                </p>
                <h4>Set up a password</h4>
            </div>
            <div class="row">
                <div class="col-sm-offset-3 col-sm-9">
                    <p class="text-warning">Warning! The password typed in is visible.</p>
                </div>
            </div>
            <form class="form-horizontal" name="mainForm" role="form" novalidate>
                <div class="form-group" ng-if="vm.hasPassword">
                    <label class="col-sm-3 control-label" for="oldPassword">Current password</label>
                    <div class="col-sm-4">
                        <input type="text" id="oldPassword" class="form-control" name="oldPassword" data-ng-model="vm.oldPassword" required />
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label" for="newPassword1">New password</label>
                    <div class="col-sm-4">
                        <input type="text" id="newPassword" class="form-control" name="newPassword" data-ng-model="vm.newPassword" ng-minlength="6" required />
                    </div>
                    <div class="col-sm-5">
                        <p class="help-block"><small>Minimum 6 characters.</small></p>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-offset-3 col-sm-9">
                        <button type="submit" class="btn btn-default" data-ng-click="vm.savePassword(mainForm)" data-ng-disabled="mainForm.$invalid || vm.sending">Save</button>
                    </div>
                </div>
            </form>
            <hr class="app-separator" />
            <h4>Manage alternative login options</h4>

            <div class="row" ng-if="vm.error" ng-cloak>
                <div class="col-sm-offset-1 col-sm-10 alert alert-danger">
                    <p class="text-center">
                        Error: {{vm.error}}
                    </p>
                </div>
            </div>

            <p ng-show="vm.userLogins.length > 0">
                Registered external login services
            </p>
            <div class="row" ng-repeat="i in vm.userLogins">
                <div class=" col-sm-offset-2 col-sm-2">
                    <strong>{{i.loginProvider}}</strong>
                </div>
                <div class="col-sm-8">
                    <button type="submit" class="btn btn-default btn-xs" ng-click="vm.removeLogin(i.loginProvider, i.providerKey)" ng-show="vm.canRemove()" ng-disabled="vm.sending"
                            ng-attr-title="Remove this {{i.loginProvider}} login from your account">
                        <i class="fa fa-times fa-fw app-fa-red"></i> Remove
                    </button>
                </div>
                <br />
                <br />
            </div>

            <p ng-show="vm.otherLogins.length > 0">
                Available external login services
            </p>
            <div class="row" ng-repeat="i in vm.otherLogins">
                <div class=" col-sm-offset-2 col-sm-2">
                    <strong>{{i}}</strong>
                </div>
                <div class="col-sm-8">
                    <form method="post" action="/account/link-login">
                        <button type="submit" class="btn btn-default btn-xs" id="{{i}}" name="provider" value="{{i}}" ng-attr-title="Log in using your {{i}} account">
                            <i class="fa fa-plus fa-fw app-fa-btn-xs app-fa-green" />Add
                        </button>
                    </form>
                </div>
                <br />
                <br />
            </div>

        </div>
    </div>
</div>

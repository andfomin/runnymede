<h3 class="page-header">{{pageTitle}}</h3>
<div class="row">
    <div class="col-sm-2">
        <div class="panel panel-default">
            <div class="panel-body">
                <ul class="list-unstyled">
                    <li><a href="#/schedule">Schedule</a></li>
                    <li><a href="#/offers">Offers</a></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-sm-8">
        <p>Start: {{vm.event.start.toDate() | appDate}}</p>
        <p>End: {{vm.event.end.toDate() | appDate}}</p>
        <p>Duration: {{vm.event.end.diff(vm.event.start, 'minutes')}} minutes. Price: {{vm.event.price | currency:'$'}}</p>
        <p>With: {{vm.event.userDisplayName}}<span data-ng-show="vm.event.userSkype">. Skype name: <strong>{{vm.event.userSkype}}</strong></span></p>
        <p>Requested: {{vm.event.creationTime.toDate() | appDate}}</p>
        <p data-ng-show="vm.event.confirmationTime">Confirmed: {{vm.event.confirmationTime.toDate() | appDate}}</p>
        <p data-ng-show="vm.event.cancellationTime">Cancelled: {{vm.event.cancellationTime.toDate() | appDate}}</p>
        <p data-ng-show="vm.event.closingTime">Closed: {{vm.event.closingTime.toDate() | appDate}}</p>
        <span data-ng-cloak>
            <button class="btn btn-default btn-danger" data-ng-if="vm.canDispute()" ng-click="vm.showModal(vm.modalParams.dispute)">Dispute session</button>
            <button class="btn btn-default btn-danger" data-ng-if="vm.canCancel()" ng-click="vm.showModal(vm.modalParams.cancel)">Cancel session</button>
        </span>
        <br />
        <br />
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Messages</h3>
            </div>
            <div class="panel-body">
                <ul>
                    <li data-ng-repeat="m in vm.messages">
                        {{m.postTime | appDate}}. From: {{m.senderDisplayName}}. To: {{m.recepientDisplayName}}
                        <p style="white-space: pre-line;">{{m.text}}</p>
                    </li>
                </ul>
                <div class="form-group">
                    <label for="messageTextarea">Send message</label>
                    <textarea class="form-control" id="messageTextarea" ng-model="vm.message" maxlength="980" />
                </div>
                <button class="btn btn-default" data-ng-click="vm.sendMessage()" data-ng-disabled="!vm.canSendMessage()">Send</button>
            </div>
        </div>
    </div>
</div>
